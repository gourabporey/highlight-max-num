<html>
  <head>
    <title>Maximum number hightlighter</title>

    <link
      rel="stylesheet"
      href="style.css" />

    <script>
      const isInvalid = (number) =>
        typeof number !== 'number' || isNaN(number) || number === null;

      const createNumberElement = (number) => {
        const numberNode = document.createElement('li');
        numberNode.innerText = number;
        return { value: number, node: numberNode };
      };

      const getNumberContainer = () => document.querySelector('#numbers');

      const readNumber = (msg, cb, timeout = 100) => {
        setTimeout(() => {
          cb(+prompt(msg));
        }, timeout);
      };

      const highlightMax = (max) => {
        max.node.classList.add('highlight');
      };

      const getElementOfMaxValue = (a, b) => (a.value > b.value ? a : b);

      const collectAndDisplayNumbers = (remainingCount, onComplete, maxNum) => {
        if (remainingCount <= 0) {
          onComplete(maxNum);
          return;
        }

        readNumber('Enter a number', (number) => {
          if (isInvalid(number)) return;

          const numbersContainer = getNumberContainer();
          const current = createNumberElement(number);
          const nextMax = getElementOfMaxValue(current, maxNum);
          numbersContainer.appendChild(current.node);

          collectAndDisplayNumbers(remainingCount - 1, onComplete, nextMax);
        });
      };

      window.onload = () => {
        const initialMax = createNumberElement(-Infinity);
        const numbersCount = 3;
        collectAndDisplayNumbers(numbersCount, highlightMax, initialMax);
      };
    </script>
  </head>
  <body>
    <main>
      <h2>Numbers</h2>
      <ul id="numbers"></ul>
    </main>
  </body>
</html>
