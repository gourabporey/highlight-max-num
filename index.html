<html>
  <head>
    <title>Maximum number hightlighter</title>

    <style>
      .highlight {
        color: green;
      }
    </style>

    <script>
      const isInvalid = (number) =>
        typeof +number !== 'number' || isNaN(number) || number === null;

      const createNumberElement = (number) => {
        const numberElement = document.createElement('li');
        numberElement.innerText = number;
        return numberElement;
      };

      const getNumberContainer = () => document.querySelector('#numbers');

      const delayedPrompt = (msg, cb, timeout = 100) => {
        setTimeout(() => {
          cb(prompt('Enter a number'));
        }, timeout);
      };

      const highlightMax = () => {
        const numbersContainer = getNumberContainer();
        const max = Array.from(numbersContainer.children).reduce(
          (maxElement, current) => {
            return +maxElement.textContent > +current.textContent
              ? maxElement
              : current;
          }
        );

        max.classList.add('highlight');
      };

      const collectNumbers = (onComplete) => {
        if (getNumberContainer().children.length === 10) {
          onComplete();
          return;
        }

        delayedPrompt('Enter a number', (number) => {
          if (isInvalid(number)) return;
          const numberElement = createNumberElement(number);
          const numbersContainer = getNumberContainer();
          numbersContainer.appendChild(numberElement);
          collectNumbers(onComplete);
        });
      };

      window.onload = () => {
        collectNumbers(highlightMax);
      };
    </script>
  </head>
  <body>
    <main>
      <h2>Numbers</h2>
      <ul id="numbers"></ul>
      <div id="highest"></div>
    </main>
  </body>
</html>
